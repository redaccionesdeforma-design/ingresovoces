<!DOCTYPE html>
<html lang="es" class="h-full">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Descubre tu Liderazgo Territorial | Voces que Salvan</title>
  <meta name="description" content="Mini‑juego inclusivo para descubrir tu estilo de liderazgo territorial en el diplomado Voces que Salvan." />
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;800;900&display=swap" rel="stylesheet">
  <script src="https://cdn.tailwindcss.com"></script>
  <style>
    :root{
      /* Paleta institucional ANSV */
      --ansv-orange:#F37021; /* botón principal */
      --ansv-orange-dark:#D85C1B; /* hover */
      --ansv-gray-ink:#2b2b2b; /* texto fuerte */
    }
    html,body{font-family:'Inter',system-ui,Segoe UI,Roboto,Arial, sans-serif; background:#f7f8fa}
    .bg-ansv{background:var(--ansv-orange)}
    .bg-ansv-dark{background:var(--ansv-orange-dark)}
    .text-ansv{color:var(--ansv-orange)}
    .ring-ansv{--tw-ring-color:var(--ansv-orange)}
    /* Animaciones accesibles */
    @keyframes card{from{opacity:0;transform:translateY(12px) scale(.98)} to{opacity:1;transform:none}}
    .anim{animation:card .5s ease-out both}
    @media (prefers-reduced-motion: reduce){
      *{animation:none!important;transition:none!important}
    }
    /* Alto contraste para foco */
    :focus-visible{outline:3px solid var(--ansv-orange); outline-offset:2px}

    /* Flashcard Styles */
    .flashcard .description {
      max-height: 0;
      overflow: hidden;
      transition: max-height 0.5s ease-out;
    }
    .flashcard.is-open .description {
      max-height: 150px; /* Adjust as needed */
    }
    .flashcard .plus-icon {
        transition: transform 0.3s ease;
    }
    .flashcard.is-open .plus-icon {
        transform: rotate(45deg);
    }


    /* Flip Card Styles */
    .flip-card {
        background-color: transparent;
        width: 100%;
        max-width: 400px; /* Max width for the card */
        height: 350px; 
        perspective: 1500px;
        cursor: pointer;
    }
    .flip-card-inner {
        position: relative;
        width: 100%;
        height: 100%;
        transition: transform 0.7s;
        transform-style: preserve-3d;
    }
    .flip-card.is-flipped .flip-card-inner {
        transform: rotateY(180deg);
    }
    .flip-card-front, .flip-card-back {
        position: absolute;
        width: 100%;
        height: 100%;
        -webkit-backface-visibility: hidden;
        backface-visibility: hidden;
        border-radius: 1.5rem; /* rounded-3xl */
        display: flex;
        flex-direction: column;
        justify-content: center;
        align-items: center;
        padding: 1.5rem;
        box-shadow: 0 10px 25px -5px rgba(0,0,0,0.1), 0 8px 10px -6px rgba(0,0,0,0.1);
    }
    .flip-card-back {
        transform: rotateY(180deg);
        background-color: white;
    }
    .badge-gradient-indigo { background: linear-gradient(135deg, #6366f1, #4f46e5); }
    .badge-gradient-teal { background: linear-gradient(135deg, #2dd4bf, #14b8a6); }
    .badge-gradient-amber { background: linear-gradient(135deg, #fbbf24, #f59e0b); }
    .badge-gradient-purple { background: linear-gradient(135deg, #a78bfa, #8b5cf6); }
  </style>
</head>
<body class="h-full flex items-center justify-center p-4">
  <main id="app" class="w-full max-w-3xl mx-auto bg-white rounded-2xl shadow-2xl overflow-hidden" aria-labelledby="app-title">

    <!-- Encabezado accesible -->
    <header class="px-6 sm:px-8 py-5 border-b border-gray-100 flex items-center justify-between" role="banner">
      <h1 id="app-title" class="text-xl sm:text-2xl font-extrabold text-gray-900">Descubre tu liderazgo territorial</h1>
      <span class="sr-only">Diplomado Voces que Salvan</span>
    </header>

    <!-- Pantalla de inicio -->
    <section id="start-screen" class="p-6 sm:p-8 anim" role="region" aria-labelledby="start-title">
      <figure class="rounded-xl overflow-hidden shadow mb-6">
        <img src="https://i.imgur.com/ju3sYXD.jpeg" alt="Grupo diverso de personas sonriendo y colaborando en un entorno urbano" class="w-full h-56 sm:h-64 object-cover" loading="eager" />
      </figure>
      <h2 id="start-title" class="text-3xl sm:text-4xl font-black leading-tight text-gray-900">¡Encuentra tu Insignia de Liderazgo!</h2>
      <p class="mt-4 text-gray-700">Tu voz tiene un poder único. ¿Sabes cuál es el tuyo?</p>
      <p class="mt-2 font-semibold text-gray-700">Primero explora los súper poderes de liderazgo y luego completa 5 retos para descubrir tu insignia personal.</p>
      <button id="explore-button" class="mt-8 w-full bg-ansv hover:bg-ansv-dark text-white font-black py-4 px-6 rounded-xl text-lg transition-transform active:scale-[.99] focus-visible:shadow-[0_0_0_4px_rgba(243,112,33,.25)]">
        Explorar los súper poderes
      </button>
    </section>

    <!-- Pantalla de Flashcards -->
    <section id="flashcard-screen" class="hidden p-6 sm:p-8" role="region" aria-labelledby="flashcard-title">
        <h2 id="flashcard-title" class="text-2xl sm:text-3xl font-black text-center text-gray-900">Los 4 Súper Poderes del Liderazgo</h2>
        <p class="text-center text-gray-600 mt-2 mb-8">Estos son los estilos que transforman territorios. Haz clic en cada uno para saber más.</p>
        <div id="flashcard-container" class="grid grid-cols-1 sm:grid-cols-2 gap-6">
            <!-- Flashcards generadas por JS -->
        </div>
        <button id="start-quiz-button" class="mt-10 w-full bg-indigo-600 hover:bg-indigo-700 text-white font-black py-4 px-6 rounded-xl text-lg transition-transform active:scale-[.99]">
            ¡Ahora, a descubrir mi insignia!
        </button>
    </section>

    <!-- Pantalla del quiz -->
    <section id="quiz-screen" class="hidden p-6 sm:p-8" role="region" aria-live="polite" aria-atomic="true">
      <div class="mb-6" aria-hidden="true">
        <p id="challenge-counter" class="text-center font-bold text-ansv mb-2"></p>
        <div class="bg-gray-200 rounded-full h-2.5" aria-hidden="true">
          <div id="progress-bar" class="bg-indigo-600 h-2.5 rounded-full transition-all duration-500" style="width:0%"></div>
        </div>
      </div>
      <div id="question-container" class="anim">
        <h3 id="question-text" class="text-2xl font-extrabold mb-6 text-center text-gray-900"></h3>
        <div id="options-container" class="grid grid-cols-1 gap-4" role="listbox" aria-label="Opciones de respuesta">
          <!-- Botones generados por JS -->
        </div>
      </div>
    </section>

    <!-- Pantalla de resultados -->
    <section id="results-screen" class="hidden" role="region" aria-live="polite" aria-atomic="true">
      <!-- Se inyecta desde JS -->
    </section>
  </main>

  <script>
    const $ = (s)=>document.querySelector(s);
    const startScreen = $('#start-screen');
    const flashcardScreen = $('#flashcard-screen');
    const quizScreen = $('#quiz-screen');
    const resultsScreen = $('#results-screen');
    const exploreButton = $('#explore-button');
    const startQuizButton = $('#start-quiz-button');
    const flashcardContainer = $('#flashcard-container');
    const questionText = $('#question-text');
    const optionsContainer = $('#options-container');
    const progressBar = $('#progress-bar');
    const challengeCounter = $('#challenge-counter');

    const diplomaLink = 'https://redipi.q10.com/';

    // SVG (trazos simples para buena perf.)
    const icons = {
      estratega: '<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" class="w-12 h-12" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21.21 15.89A10 10 0 1 1 8 2.83"/><path d="M22 12A10 10 0 0 0 12 2v10z"/></svg>',
      conectora: '<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" class="w-12 h-12" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2"/><circle cx="9" cy="7" r="4"/><path d="M22 21v-2a4 4 0 0 0-3-3.87"/><path d="M16 3.13a4 4 0 0 1 0 7.75"/></svg>',
      impulsora: '<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" class="w-12 h-12" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polygon points="13 2 3 14 12 14 11 22 21 10 12 10 13 2"/></svg>',
      creativa: '<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" class="w-12 h-12" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M15 14c.2-1 .7-1.7 1.5-2.5C17.7 10.2 18 9 18 7.5a6 6 0 0 0-12 0c0 1.5.3 2.7 1.5 3.9.8.8 1.3 1.5 1.5 2.5"/><path d="M9 18h6"/><path d="M10 22h4"/></svg>'
    };

    const questions = [
      { q:'En tu barrio hay un cruce peligroso. ¿Qué es lo primero que haces?', a:[
        { t:'Investigo datos sobre siniestros para presentar una propuesta formal.', k:'estratega' },
        { t:'Organizo un encuentro con el vecindario para escuchar ideas y unir fuerzas.', k:'conectora' },
        { t:"Propongo una acción inmediata, como pintar una cebra peatonal temporal.", k:'impulsora' },
        { t:'Diseño una campaña creativa en redes para visibilizar el riesgo y educar.', k:'creativa' }
      ]},
      { q:'Anuncian una ciclorruta, pero excluye a parte de la comunidad. ¿Tu reacción?', a:[
        { t:'Analizo el plan técnico y la normativa para sustentar una contrapropuesta.', k:'estratega' },
        { t:'Convoco a las personas excluidas para que sus voces sean escuchadas.', k:'conectora' },
        { t:'Organizo un recorrido en bici por la zona para demostrar la necesidad real.', k:'impulsora' },
        { t:'Creo un mapa interactivo para que la gente señale sus rutas deseadas.', k:'creativa' }
      ]},
      { q:'Necesitas convencer a la junta local de invertir en seguridad vial para la niñez. ¿Tu argumento principal?', a:[
        { t:'Un informe con estadísticas de riesgo y retorno social de la inversión.', k:'estratega' },
        { t:'Testimonios de familias y docentes sobre la preocupación comunitaria.', k:'conectora' },
        { t:'Un plan de acción concreto y de bajo costo para implementar en semanas.', k:'impulsora' },
        { t:'Una presentación visual desde la mirada de la niñez.', k:'creativa' }
      ]},
      { q:'RETO DE ESTRATEGIA: Tienes una semana y un equipo pequeño para una campaña de impacto rápido. ¿Qué priorizas?', a:[
        { t:'Sondeo exprés para detectar el punto de mayor riesgo y enfocar el esfuerzo.', k:'estratega' },
        { t:"Un 'café con la comunidad' para presentar el problema y sumar más personas.", k:'conectora' },
        { t:"Lanzar una intervención táctica inmediata, como una 'cebratón'.", k:'impulsora' },
        { t:'Crear un video corto y potente para redes que genere conciencia masiva.', k:'creativa' }
      ]},
      { q:'Un grupo de jóvenes usa una zona peatonal para acrobacias en bici, generando tensión con personas mayores. ¿Cómo lo abordas?', a:[
        { t:'Propongo horarios de uso diferenciados según flujos peatonales.', k:'estratega' },
        { t:'Modero un diálogo entre ambos grupos para que acuerden una solución.', k:'conectora' },
        { t:"Coorganizo con las juventudes un evento de 'stunt' seguro en un parque.", k:'impulsora' },
        { t:'Diseño señalización urbana amigable que invite a la convivencia.', k:'creativa' }
      ]}
    ];

    const profiles = {
      estratega:{
        title:'La Mente Estratega',
        desc:'Analizas, planificas y argumentas con datos. Tu súper poder es convertir problemas complejos en planes sólidos que inspiran confianza.',
        tips:[
          'Traduce los datos en historias que conecten emocionalmente.',
          'Equilibra rigor técnico con intuición comunitaria.',
          'Haz equipo con otros perfiles para acelerar la ejecución.'
        ], color:'indigo'
      },
      conectora:{
        title:'La Voz Conectora',
        desc:'Eres el puente entre personas, ideas y voluntades. Tu fortaleza es la empatía, la escucha y la colaboración.',
        tips:[
          'Define objetivos claros para enfocar la energía del grupo.',
          'Sustenta las voces con datos y normativa.',
          'Distribuye tareas para multiplicar resultados.'
        ], color:'teal'
      },
      impulsora:{
        title:'La Fuerza Impulsora',
        desc:'Manos a la obra. Actúas con rapidez para generar cambios visibles y tangibles. Tu energía demuestra que el cambio es posible hoy.',
        tips:[
          'Planifica pausas para asegurar sostenibilidad.',
          'Escucha activa para alinear acción con necesidades reales.',
          'Comunica logros para inspirar adhesión.'
        ], color:'amber'
      },
      creativa:{
        title:'La Semilla Creativa',
        desc:'Ves ángulos inesperados. Innovas, comunicas distinto y encuentras soluciones donde nadie más las ve.',
        tips:[
          'Alíate con perfiles estructurados para viabilidad.',
          'Asegura lenguaje claro e inclusivo en tus propuestas.',
          'Abraza el ensayo‑error como motor de aprendizaje.'
        ], color:'purple'
      }
    };

    let idx=0;
    let score = { estratega:0, conectora:0, impulsora:0, creativa:0 };

    function init() {
        exploreButton.addEventListener('click', showFlashcards);
        startQuizButton.addEventListener('click', startQuiz);
        buildFlashcards();
    }

    function buildFlashcards() {
        flashcardContainer.innerHTML = '';
        Object.entries(profiles).forEach(([key, profile]) => {
            const card = document.createElement('button');
            card.type = 'button';
            const palette = {
                indigo:'text-indigo-600 bg-indigo-50 border-indigo-200',
                teal:'text-teal-600 bg-teal-50 border-teal-200',
                amber:'text-amber-600 bg-amber-50 border-amber-200',
                purple:'text-purple-600 bg-purple-50 border-purple-200'
            }[profile.color];
            
            card.className = `flashcard p-6 rounded-2xl text-left border-2 transition-all ${palette.split(' ')[2]}`;
            card.innerHTML = `
                <div class="flex items-start justify-between">
                    <div class="flex items-center gap-4">
                        <div class="${palette.split(' ')[0]}">${icons[key].replace('w-12 h-12','w-10 h-10')}</div>
                        <h3 class="font-black text-lg text-gray-900">${profile.title}</h3>
                    </div>
                    <div class="plus-icon text-gray-400 flex-shrink-0">
                        <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2.5"><path stroke-linecap="round" stroke-linejoin="round" d="M12 4v16m8-8H4" /></svg>
                    </div>
                </div>
                <div class="description text-sm text-gray-600 pr-6 pt-2">
                    <p>${profile.desc}</p>
                </div>
            `;
            card.addEventListener('click', () => card.classList.toggle('is-open'));
            flashcardContainer.appendChild(card);
        });
    }

    function showFlashcards() {
        startScreen.classList.add('hidden');
        flashcardScreen.classList.remove('hidden');
        flashcardScreen.classList.add('anim');
    }

    function startQuiz() {
        flashcardScreen.classList.add('hidden');
        quizScreen.classList.remove('hidden');
        renderQuestion();
    }

    function renderQuestion(){
      const q = questions[idx];
      const pct = (idx/questions.length)*100;
      progressBar.style.width = pct+"%";
      challengeCounter.textContent = `Reto ${idx+1} de ${questions.length}`;
      questionText.textContent = q.q;
      optionsContainer.innerHTML = '';
      $('#question-container').classList.remove('anim');
      void $('#question-container').offsetWidth; // Trigger reflow
      $('#question-container').classList.add('anim');


      q.a.forEach(({t,k})=>{
        const btn = document.createElement('button');
        btn.type='button';
        btn.className='w-full flex items-start gap-3 bg-white hover:bg-indigo-50 hover:border-indigo-500 text-left p-4 rounded-xl transition border-2 border-gray-200 shadow-sm focus-visible:ring-2 ring-ansv';
        btn.setAttribute('role','option');
        btn.setAttribute('aria-label', t);
        btn.dataset.key=k;
        btn.innerHTML = `<span class="text-ansv mt-1">${icons[k].replace('w-12 h-12','w-6 h-6')}</span><span class="flex-1">${t}</span>`;
        btn.addEventListener('click', onAnswer);
        optionsContainer.appendChild(btn);
      });
    }

    function onAnswer(e){
      const k = e.currentTarget.dataset.key;
      score[k]++;
      idx++;
      if(idx < questions.length){
        renderQuestion();
      }else{
        showResults();
      }
    }

    function showResults(){
      quizScreen.classList.add('hidden');

      const entries = Object.entries(score).sort((a,b)=>b[1]-a[1]);
      const mainKey = entries[0][0];
      const main = profiles[mainKey];

      const palette = {
        indigo:{ front: 'badge-gradient-indigo text-indigo-100', back: 'text-indigo-600' },
        teal:{ front: 'badge-gradient-teal text-teal-100', back: 'text-teal-600' },
        amber:{ front: 'badge-gradient-amber text-amber-100', back: 'text-amber-600' },
        purple:{ front: 'badge-gradient-purple text-purple-100', back: 'text-purple-600' }
      }[main.color];

      const tips = main.tips.map(x=>`<li class="flex items-start"><svg class="w-5 h-5 mr-2 mt-0.5 text-green-500 flex-shrink-0" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg><span>${x}</span></li>`).join('');

      resultsScreen.innerHTML = `
      <div class="p-6 sm:p-8 anim">
        <div class="text-center mb-6">
          <p class="font-bold text-gray-500">¡MISIÓN CUMPLIDA! TU INSIGNIA ES:</p>
        </div>
        
        <div class="flex justify-center my-6">
            <div id="insignia-card" class="flip-card">
                <div class="flip-card-inner">
                    <div class="flip-card-front text-white ${palette.front}">
                        <div class="w-24 h-24 mb-4 bg-white/20 rounded-full flex items-center justify-center backdrop-blur-sm">${icons[mainKey]}</div>
                        <h2 class="text-3xl font-black tracking-tight">${main.title}</h2>
                        <p class="mt-4 max-w-xs text-center">${main.desc}</p>
                        <div class="absolute bottom-6 text-xs font-bold opacity-75 animate-pulse">Toca para revelar tus súper poderes</div>
                    </div>
                    <div class="flip-card-back">
                        <h3 class="font-black text-xl mb-3 ${palette.back}">Cómo potenciar tu liderazgo</h3>
                        <ul class="space-y-2 text-gray-700 text-sm">${tips}</ul>
                    </div>
                </div>
            </div>
        </div>

        <div class="bg-indigo-50 p-6 rounded-2xl border border-indigo-200">
          <h3 class="font-black text-xl mb-4 text-center bg-gradient-to-r from-indigo-600 to-fuchsia-600 bg-clip-text text-transparent">✨ Desbloquea tu poder en el Diplomado ✨</h3>
          <ul class="space-y-3 text-gray-700">
            <li class="flex items-start"><svg class="w-6 h-6 mr-2 text-indigo-500" fill="currentColor" viewBox="0 0 20 20"><path fill-rule="evenodd" d="M6.267 3.455a3.066 3.066 0 001.745-.723 3.066 3.066 0 013.976 0 3.066 3.066 0 001.745.723 3.066 3.066 0 012.812 2.812c.051.643.304 1.254.723 1.745a3.066 3.066 0 010 3.976 3.066 3.066 0 00-.723 1.745 3.066 3.066 0 01-2.812 2.812 3.066 3.066 0 00-1.745.723 3.066 3.066 0 01-3.976 0 3.066 3.066 0 00-1.745-.723 3.066 3.066 0 01-2.812-2.812 3.066 3.066 0 00-.723-1.745 3.066 3.066 0 010-3.976 3.066 3.066 0 00.723-1.745 3.066 3.066 0 012.812-2.812zM12 14a4 4 0 100-8 4 4 0 000 8zm-2 0a2 2 0 100-4 2 2 0 000 4z" clip-rule="evenodd"></path></svg><span><strong>Visión global</strong> para actuar localmente con el PNSV.</span></li>
            <li class="flex items-start"><svg class="w-6 h-6 mr-2 text-indigo-500" fill="currentColor" viewBox="0 0 20 20"><path d="M2 5a2 2 0 012-2h2.5a2 2 0 011.6.8l1.5 2a2 2 0 001.6.8H16a2 2 0 012 2v6a2 2 0 01-2 2H4a2 2 0 01-2-2V5z"></path></svg><span><strong>Liderazgo inclusivo</strong> con enfoque diferencial.</span></li>
            <li class="flex items-start"><svg class="w-6 h-6 mr-2 text-indigo-500" fill="currentColor" viewBox="0 0 20 20"><path d="M4 3a2 2 0 00-2 2v10a2 2 0 002 2h6a2 2 0 002-2V5a2 2 0 00-2-2H4zM14 7h2a2 2 0 012 2v6a2 2 0 01-2 2h-2"></path></svg><span><strong>Infraestructura segura</strong> basada en evidencia.</span></li>
          </ul>
        </div>

        <div class="mt-8 text-center bg-white p-6 rounded-2xl border border-gray-100">
          <p class="text-xl font-bold text-gray-900">Tu liderazgo es justo lo que tu territorio necesita.</p>
          <a href="${diplomaLink}" target="_blank" rel="noopener" class="mt-6 inline-block w-full bg-ansv hover:bg-ansv-dark text-white font-black py-4 px-6 rounded-xl text-lg transition active:scale-[.99]">¡Potenciar mi liderazgo ahora!</a>
          <p class="mt-4 text-gray-600 text-sm">Recuerda que tienes hasta <strong>noviembre</strong> para completar este viaje a tu ritmo.</p>
          <button id="restart" class="mt-4 inline-block w-full border-2 border-gray-300 text-gray-700 font-semibold py-3 px-6 rounded-xl">Volver a jugar</button>
        </div>
      </div>`;

      $('#results-screen').classList.remove('hidden');
      $('#insignia-card').addEventListener('click', (e) => e.currentTarget.classList.toggle('is-flipped'));
      $('#restart').addEventListener('click', () => {
          idx = 0;
          score = { estratega:0, conectora:0, impulsora:0, creativa:0 };
          resultsScreen.classList.add('hidden');
          startScreen.classList.remove('hidden');
          startScreen.classList.add('anim');
      });
    }

    init();
  </script>
</body>
</html>
